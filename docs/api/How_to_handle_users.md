# Miurafx API Reference - /users

## Overview

This documentation covers the `GET` and `POST` routes for handle users in Miurafx. Each route specifies its HTTP method, required permissions (authentication and roles), required body request, as well as the required and optional parameters.

-   **Methods:** `GET`, `POST`
-   **Middleware:** `sanctum (read about token and role based authentication [here](/Introduction.md))`
-   **Roles:** `master`

#### `providers/users ::GET`

-   **Description:** Retrieves a list of all users based on the requeriments provided by the customer.
-   **Headers:**
    -   `Authorization: Bearer <token>`
-   **Response structure:**

```json
{
    "results": [
        {
            "CustomerId": int,
            "full_name": string,
            "email": string,
            "phone": string,
            "country": string,
            "saleStatus": string | "No associated accessor for this user",
            "ftd_movements": array | "No movements associated yet",
            "autologin_url": string,
        },
        {
            ,,,
        }
    ]
}
```

#### POST `providers/users/create`

-   **Description:** Creates a new user on the database. This action will associate a new client to the barely created user.
-   **Headers:**
    -   `Authorization: Bearer <token>`
-   **Request body:**

```json
{
    "id": int,
    "first_name": string,
    "last_name": string,
    "email": string,
    "phone": string,
    "country": string,
    "password": string -> IMPORTANT: This field is autogenerated in our database and 'password' request fields are not allowed in our API
}
```

-   **Sample Response:**

```json
{
    {
        "message": "User created succesfully",
        "CustomerID": 19,
        "status": 201,
        "autologin_url": "https://miurafx.com/iniciar-sesion"
    }
}
```

If you have any question, please send me a message with an screenshot of the error you're performing.
